<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Galerie</title>
    <style>
        html, body {
            height: 100%;
            margin: 0;
            background: black;
            color: white;
            font-family: "Arial", sans-serif;
            overflow: hidden;
            transition: background 0.5s ease;
        }

        .gallery-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .background-layer {
            position: absolute;
            inset: 0;
            background-image: url('images/background_2.jpg');
            background-size: cover;
            background-position: center;
            opacity: 0.6;
            filter: brightness(0.5);
            z-index: 0;
            transition: opacity 1s ease;
        }

        .image-area {
            width: 100%;
            height: 70%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            position: relative;
            z-index: 5;
        }

        img#gallery-image {
            max-height: 65vh;
            max-width: 90vw;
            object-fit: contain;
            border-radius: 1.5rem;
            box-shadow: 0 0 60px rgba(255, 255, 255, 0.15);
            border: 1px solid rgba(255, 255, 255, 0.25);
            background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            backdrop-filter: blur(25px) saturate(180%);
            opacity: 0;
            transform: scale(1.02);
            transition: opacity 4s ease, transform 4s ease;
        }

        img#gallery-image.active {
            opacity: 1;
            transform: scale(1);
        }

        .subtitle-box {
            margin-top: 2rem;
            color: rgba(255, 255, 255, 0.9);
            font-size: 1.4rem;
            padding: 1rem 2rem;
            border-radius: 1rem;
            background: linear-gradient(135deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.25);
            backdrop-filter: blur(20px) saturate(180%);
            text-align: center;
            transition: opacity 1.5s ease;
            opacity: 0;
            max-width: 80%;
            box-shadow: inset 0 0 30px rgba(255,255,255,0.1),
            0 0 40px rgba(255,255,255,0.15);
        }

        .subtitle-box.visible { opacity: 1; }

        .nav {
            position: absolute;
            top: 50%;
            right: 4%;
            transform: translateY(-50%);
            z-index: 20;
        }

        .nav button {
            width: 5rem;
            height: 5rem;
            border-radius: 50%;
            background: linear-gradient(145deg, rgba(255,255,255,0.25), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.35);
            color: white;
            cursor: pointer;
            backdrop-filter: blur(25px) saturate(180%);
            box-shadow: inset 0 0 30px rgba(255,255,255,0.15),
            0 0 80px rgba(255,255,255,0.2);
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.5s ease;
        }

        .nav button:hover {
            background: rgba(255,255,255,0.4);
            color: black;
        }

        .counter-box, .text-box {
            position: absolute;
            left: 12%;
            transform: translate(-50%, -50%);
            padding: 1rem 2rem;
            border-radius: 1rem;
            background: linear-gradient(145deg, rgba(255,255,255,0.2), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.25);
            backdrop-filter: blur(25px) saturate(180%);
            text-align: center;
            z-index: 20;
            box-shadow: inset 0 0 30px rgba(255,255,255,0.1),
            0 0 40px rgba(255,255,255,0.15);
        }
        .exit-btn:hover {
            color: black;
            background: rgba(255, 255, 255, 0.45);
            box-shadow:
                    inset 0 0 40px rgba(255, 255, 255, 0.3),
                    0 0 80px rgba(255, 255, 255, 0.5);
        }
        body.fade-out {
            opacity: 0;
            transition: opacity 1s ease;
        }

        .counter-box {
            top: 50%;
            font-size: 2.2rem;
            transition: all 2s ease;
        }

        .text-box {
            top: 62%;
            font-size: 1.4rem;
            color: rgba(255,255,255,0.9);
            white-space: nowrap;
            overflow: hidden;
        }

        .exit-btn, .source-btn {
            position: absolute;
            left: 50%;
            transform: translate(-50%, -50%);
            padding: 1.2rem 2.5rem;
            border-radius: 2rem;
            border: 1px solid rgba(255,255,255,0.3);
            background: linear-gradient(145deg, rgba(255,255,255,0.25), rgba(255,255,255,0.05));
            color: white;
            cursor: pointer;
            backdrop-filter: blur(25px) saturate(180%);
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.5s ease;
            font-size: 1.2rem;
            z-index: 50;
        }

        .exit-btn.visible, .source-btn.visible {
            opacity: 1;
            pointer-events: bounding-box;
        }

        .exit-btn { top: 70%; }
        .source-btn { bottom: 5%; }

        .progress-bar {
            position: absolute;
            bottom: 0;
            left: 0;
            height: 6px;
            width: 0%;
            background: linear-gradient(90deg, rgba(255,255,255,0.9), rgba(255,255,255,0.3));
            transition: width 2s ease;
            border-radius: 3px;
            z-index: 25;
        }

        .final-section {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
            width: 80%;
            opacity: 0;
            transition: opacity 2s ease;
            z-index: 100;
        }

        .final-section.visible { opacity: 1; }

        .final-text {
            font-size: 1.3rem;
            line-height: 1.7;
            color: rgba(255,255,255,0.9);
            margin-bottom: 2rem;
        }

        .quote-box {
            display: inline-block;
            background: linear-gradient(145deg, rgba(255,255,255,0.15), rgba(255,255,255,0.05));
            border: 1px solid rgba(255,255,255,0.25);
            border-radius: 1rem;
            padding: 1.5rem 2rem;
            max-width: 600px;
            backdrop-filter: blur(20px) saturate(180%);
            font-style: italic;
            font-size: 1.1rem;
            color: rgba(255,255,255,0.95);
            box-shadow: inset 0 0 30px rgba(255,255,255,0.1),
            0 0 40px rgba(255,255,255,0.15);
        }

        .quote-author {
            display: block;
            margin-top: 0.8rem;
            font-size: 1rem;
            color: rgba(255,255,255,0.6);
            font-style: normal;
        }

        @media (max-width: 768px) {
            .image-area { height: 55%; }
            img#gallery-image { max-height: 50vh; }
            .subtitle-box { font-size: 1.3rem; max-width: 90%; padding: 1rem 1.5rem; }

            .counter-box, .text-box {
                top: 5%;
                left: 50%;
                transform: translateX(-50%);
                font-size: 1rem;
            }
            .text-box { top: 12%; }
            .nav {
                position: absolute;
                bottom: 1.5rem;
                right: 1.5rem;
                top: auto;
                transform: none;
            }
            .final-section {
                width: 93%;
            }
            .source-btn { bottom: 2%; }
            .exit-btn {
                top: auto;
                bottom: 10%;
                left: 50%;
                transform: translateX(-50%);
                pointer-events: auto;
            }
        }
    </style>
</head>

<body>
<div class="gallery-container">
    <div class="background-layer" id="bgLayer"></div>

    <div class="image-area">
        <img id="gallery-image" src="" alt="Artwork" />
        <div id="subtitle" class="subtitle-box"></div>
    </div>

    <div class="nav"><button id="next">&gt;</button></div>
    <div class="counter-box" id="counter">0</div>
    <div class="text-box" id="textBox">Erster Eintrag</div>
    <button id="exit" class="exit-btn">Galerie verlassen</button>
    <button id="sources" class="source-btn">Quellen</button>
    <div class="progress-bar" id="progress"></div>

    <div class="final-section" id="finalSection">
        <div class="final-text">
            Mindestens 1.084.457 Juden wurden zwischen 1941 und 1945 aus den verschiedensten Teilen Europas, <br> insbesondere Ungarn und Polen, in das KL Auschwitz deportiert. <br>
            Hinzu kommen hunderttausende Sinti und Roma, Polen, Kriegsgefangene und andere als solche deklarierte Feinde, <br>denen sich das nationalsozialistische Regime entledigte. <br>
            Der Holocaust forderte alleine in Auschwitz etwa 1,1 Millionen Opfer, insgesamt wurden 5,6 bis 6,3 Millionen Menschen brutalst ermordet. <br>
            Orte wie das Konzentrationslager Auschwitz müssen für immer als ein Mahnmal an uns alle bestehen. <br>
            Gedenken ist mehr als ein Akt der Vergangenheit. Es ist eine Brücke in die Gegenwart, ein Imperativ gerichtet auf jede(n), eine Weisheit für die Zukunft.
        </div>
        <div class="quote-box">
            „Wir dürfen niemals vergessen, doch Erinnern allein reicht nicht.“
            <span class="quote-author">– Margot Friedländer</span>
        </div>
    </div>
</div>

<script>
    const gallery = [
        { src: 'images/full.jpg', subtitle: 'Dreiteiliger Lagerkomplex des Konzentrationslagers Auschwitz - Bild des 60. südafrikanischen Aufklärungsgeschwaders' },
        { src: 'images/stammlager.jpg', subtitle: 'Luftbild des Stammlagers' },
        { src: 'images/img_1.jpg', subtitle: 'Stacheln und Draht. Überall.' },
        { src: 'images/img_4.jpg', subtitle: '„Denn in diesem Augenblick war mir so ganz intensiv zu Bewusstsein gekommen, dass kein Traum, auch nicht der schrecklichste, so arg sein kann wie die Realität, die uns dort im Lager umgab…“ - Viktor E. Frankl ' },
        { src: 'images/img_6.jpg', subtitle: 'Blick von drinnen nach draußen – oder von draußen nach drinnen?' },
        { src: 'images/img_16.jpg', subtitle: 'Dunkelstes Licht' },
        { src: 'images/img_7.jpg', subtitle: 'Jeder Schuh ein Schicksal ' },
        { src: 'images/img_17.jpg', subtitle: 'Schlag. Tot. Nächster. Nachbaute der schwarzen Wand im Stammlager.' },
        { src: 'images/img_8.jpg', subtitle: 'Block 21: chirurgische Abteilung' },
        { src: 'images/img_20.jpg', subtitle: 'Der Tod - in Mitten lebendigster Natur' },
        { src: 'images/img_10.jpg', subtitle: 'Himmel über Hölle - Der letzte Blick nach oben vor Betreten der Gaskammer' },
        { src: 'images/img_11.jpg', subtitle: '„… wir wissen es und können es ruhig sagen: die Besten sind nicht zurückgekommen.“ ' +
                '- Viktor E. Frankl\n' },
        { src: 'images/img_12.jpg', subtitle: '„Erlösung finde ich hier durch Krematorium Nummer 4“ – Sprichwort unter Häftlingen' },
        { src: 'images/img_2.jpg', subtitle: 'Kinderhand tut Wahrheit kund' },
        { src: 'images/birkenau.jpg', subtitle: 'Luftbild des Lagers Auschwitz-Birkenau - Pfeile verweisen auf Häftlingsgruppen' },
        { src: 'images/img_5.jpg', subtitle: 'Der Gang in den Draht – Beliebte Alternative zum Leben im Leiden' },
        { src: 'images/img_13.jpg', subtitle: 'Barackenüberreste' },
        { src: 'images/img_19.jpg', subtitle: 'Bis zum Horizont; weiter als bis zum Horizont' },
        { src: 'images/img_18.jpg', subtitle: 'Kanada - Was von den Häftlingen übrig bleibt' },
        { src: 'images/img_14.jpg', subtitle: 'Omnipräsenter Verfall - nicht nur im Physischen' },
        { src: 'images/img_15.jpg', subtitle: 'Inmitten der Szenerie: vier stille, schwarze Grabsteine. Scheinbar ohne Grab.' },
        { src: 'images/img_21.jpg', subtitle: 'Schritt für Schritt in den Tod'}
    ];

    const steps = [0,18832,82921,49432,46025,105004,72285,80629,6434,4774,8666,0,228674,169345,72419,92634,18101,7936,14];
    const texts = ["","","März - Mai 1942","Juni - August 1942","September - Oktober 1942","November - Dezember 1942","Januar - März 1943","April - Juni 1943","Juli - September 1943","Oktober - Dezember 1943","Januar 1944","Februar 1944","März 1944","April 1944","","Mai 1944","Juni 1944","Juli 1944","August - September 1944","Oktober 1944","November 1944","Dezember 1944 - Januar 1945"];

    let index = 0, counter = 1500, stepIndex = 0, textIndex = 0;
    let typingTimeout;

    const imgEl = document.getElementById('gallery-image');
    const subtitle = document.getElementById('subtitle');
    const progressBar = document.getElementById('progress');
    const nextBtn = document.getElementById('next');
    const counterBox = document.getElementById('counter');
    const textBox = document.getElementById('textBox');
    const exitBtn = document.getElementById('exit');
    const sourceBtn = document.getElementById('sources');
    const bgLayer = document.getElementById('bgLayer');
    const finalSection = document.getElementById('finalSection');

    function animateCounter(to) {
        const start = counter, duration = 800, startTime = performance.now();
        function step(ts) {
            const progress = Math.min((ts - startTime) / duration, 1);
            counterBox.textContent = Math.floor(start + (to - start) * progress);
            if (progress < 1) requestAnimationFrame(step);
            else counter = to;
        }
        requestAnimationFrame(step);
    }

    function typeText(text) {
        if (typingTimeout) clearTimeout(typingTimeout);
        textBox.textContent = "";
        let i = 0;
        const speed = 100;
        function type() {
            if (i < text.length) {
                textBox.textContent += text.charAt(i);
                i++;
                typingTimeout = setTimeout(type, speed);
            } else typingTimeout = null;
        }
        type();
    }

    function showImage(i) {
        if (i < 0 || i >= gallery.length) return;
        imgEl.classList.remove('active');
        subtitle.classList.remove('visible');
        setTimeout(() => {
            imgEl.src = gallery[i].src;
            subtitle.textContent = gallery[i].subtitle;
            imgEl.classList.add('active');
            subtitle.classList.add('visible');
        }, 3000);
        progressBar.style.width = ((i + 1) / gallery.length * 100) + '%';
    }

    nextBtn.addEventListener('click', () => {
        if (index < gallery.length - 1) {
            index++;
            showImage(index);

            const inc = steps[stepIndex % steps.length];
            animateCounter(counter + inc);
            stepIndex++;

            textIndex = (textIndex + 1) % texts.length;
            typeText(texts[textIndex]);

        } else {
            imgEl.classList.remove('active');
            subtitle.classList.remove('visible');
            nextBtn.style.opacity = 0;
            nextBtn.style.pointerEvents = 'none';

            counterBox.style.transition = 'all 1.8s ease';
            counterBox.style.top = '10%';
            counterBox.style.left = '50%';
            counterBox.style.transform = 'translate(-50%, -50%)';
            counterBox.style.fontSize = '2.4rem';

            textBox.style.opacity = 0;
            setTimeout(() => exitBtn.classList.add('visible'), 300);
        }
    });

    exitBtn.addEventListener('click', () => {
        exitBtn.style.opacity = 0;
        exitBtn.style.pointerEvents = 'none';
        bgLayer.style.opacity = 0;
        document.body.style.background = 'black';

        setTimeout(() => {
            finalSection.classList.add('visible');
            setTimeout(() => sourceBtn.classList.add('visible'), 2000);
        }, 100);
    });

    sourceBtn.addEventListener('click', () => {
        document.body.classList.add('fade-out');

        // Nach 1 Sekunde auf die neue Seite wechseln
        setTimeout(() => {
            window.location.href = "sources.html";
        }, 1000); // 1000ms = Dauer der CSS-Transition
    });

    showImage(0);
    animateCounter(counter);
    typeText(texts[textIndex]);
</script>
</body>
</html>
